<head>
  <title>THE TRANCE VIBRATOR RESUSCITATOR</title>
  <meta name="viewport" content="initial-scale=1.0">
  <script src="./JoyCon.js"></script>
  <script src="./TranceVibrator.js"></script>
  <script src="./BuiltinVibrator.js"></script>
  <script src="./DebugAudio.js"></script>
  <script src="./Pad.js"></script>
  <script src="./YouTubeSource.js"></script>
  <script src="./AudioSource.js"></script>
  <script src="./WebGLChart.js"></script>
  <script src="./RezInfiniteOSTPattern.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <div id="player"></div>

  <div id="setup">
    <h1>THE TRANCE VIBRATOR RESUSCITATOR <small>by <a target="_blank" href="https://twitter.com/zk_phi">@zk-phi</a></small></h1>
    <p>
      <div class="ball" id="ball1"></div>
      <div class="ball" id="ball2"></div>
      <a id="unmute" href="javascript: unmute();">&gt; PREVIEW SOUND</a>
    </p>
    <p>Orchestrate "Trance Vibrator" (and/or other vibrators) in sync with "Rez" music.</p>
    <p>* This is an experimental app, without warranty of any kind.</p>
    <p>* Latest Blink-powered browser (including Chrome, Opera, Edge) required.</p>
    <section>
      <h2>SOURCE</h2>
      <p>Refresh this page if the video does not load.</p>
      <p>- VIDEO: <span id="videoStatus">(loading ...)</span></p>
      <p id="sources">
        (you may also
        <a href="javascript: enumerateSources();">capture other audio devices / desktop audio</a>
        to sync with)
      </p>
    </section>
    <section>
      <h2>VIBRATORS</h2>
      <p>Connect devices and click "+ Connect" button to add.</p>
      <p>- CONNECTED DEVICES: <span id="deviceCount">0</span></p>
      <p>
        <select id="device">
          <option value="tranceVibrator">DEVICE: Trance Vibrator (USB)</option>
          <option value="joyCon">DEVICE: Joy-Con, Pro-Con (Bluetooth)</option>
          <option value="pad">DEVICE: Other gamepad</option>
          <option value="builtin">DEVICE: Built-in vibrator (Android)</option>
          <option value="audio">DEVICE: Audio feedback (for debug)</option>
        </select>
        <select id="balance">
          <option value="default">PATTERN: Default</option>
          <option value="main">PATTERN: MAIN track only</option>
          <option value="sub">PATTERN: SUB track only</option>
        </select>
        <button onclick="connect()">+ CONNECT</button>
      </p>
      <p>Press "PLAY" button when you're ready.</p>
      <button id="start" onclick="play();">PLAY</button>
    </section>
  </div>

  <div id="monitor" style="display: none">
    <div>
      STATUS: <span id="time"></span>
    </div>
    <div>
      MAIN: <span id="vibrationContainer"><span class="vibration" id="vibration1"></span></span>
      <div class="ball" id="ball1"></div>
    </div>
    <div>
      SUB : <span id="vibrationContainer"><span class="vibration" id="vibration2"></span></span>
      <div class="ball" id="ball2"></div>
    </div>
  </div>

  <script src="main.js"></script>
</body>
